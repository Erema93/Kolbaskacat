import os
import telebot
import schedule
import time
import threading
from flask import Flask

app = Flask(__name__)

TOKEN = "7938046164:AAF77xQmwN1a3Hph19M6e-B0FiWB9UUzcYw"
CHAT_ID = "572255263"

bot = telebot.TeleBot(TOKEN)

# –û—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É /start
@bot.message_handler(commands=['start'])
def send_welcome(message):
    bot.send_message(message.chat.id, "–ü—Ä–∏–≤–µ—Ç! üê± –Ø –±—É–¥—É –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–±–µ —Å–∫–∞–∑–∫–∏ –ø—Ä–æ –∫–æ—Ç–æ–≤-–∫–æ–ª–±–∞—Å–æ–∫ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 22:00!")

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∫–∞–∑–æ–∫
def send_tales():
    tale1 = "üê± –ò—Å—Ç–æ—Ä–∏—è 1: –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è –∫–æ—Ç–æ–≤-–∫–æ–ª–±–∞—Å–æ–∫..."
    tale2 = "üê± –ò—Å—Ç–æ—Ä–∏—è 2: –°–ª–∞–¥–∫–∏–π –º–∏—Ä –∫–æ—Ç–æ–≤-–∫–æ–ª–±–∞—Å–æ–∫..."
    bot.send_message(CHAT_ID, tale1)
    bot.send_message(CHAT_ID, tale2)

# –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –≤ 22:00 –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
schedule.every().day.at("00:20").do(send_tales)

# –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
def run_bot():
    while True:
        schedule.run_pending()
        time.sleep(60)

threading.Thread(target=run_bot).start()

# Flask –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Render
@app.route('/')
def index():
    return "–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç!"

# –£–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Ä—Ç, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
if __name__ == "__main__":
    port = int(os.environ.get("PORT", 5000))  # –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è PORT –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º 5000
    app.run(host="0.0.0.0", port=port)






